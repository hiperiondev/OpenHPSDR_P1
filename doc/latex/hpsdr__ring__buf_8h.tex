\hypertarget{hpsdr__ring__buf_8h}{}\doxysection{hpsdr\+\_\+ring\+\_\+buf.\+h File Reference}
\label{hpsdr__ring__buf_8h}\index{hpsdr\_ring\_buf.h@{hpsdr\_ring\_buf.h}}


Lock-\/free ring buffer.  


{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structRingBuf}{Ring\+Buf}}
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef uint16\+\_\+t \mbox{\hyperlink{hpsdr__ring__buf_8h_acfc2963653417d2e231586b3568cb23b}{Ring\+Buf\+Ctr}}
\item 
typedef void($\ast$ \mbox{\hyperlink{hpsdr__ring__buf_8h_a7ee7aa265b51a69faf41a3f79ac2bc8d}{Ring\+Buf\+Handler}}) (float \+\_\+\+Complex const el)
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{hpsdr__ring__buf_8h_a4f4486e73ca28b674b28ef3a76010747}{Ring\+Buf\+\_\+ctor}} (\mbox{\hyperlink{structRingBuf}{Ring\+Buf}} $\ast$const me, float \+\_\+\+Complex sto\mbox{[}$\,$\mbox{]}, \mbox{\hyperlink{hpsdr__ring__buf_8h_acfc2963653417d2e231586b3568cb23b}{Ring\+Buf\+Ctr}} sto\+\_\+len)
\item 
\mbox{\hyperlink{hpsdr__ring__buf_8h_acfc2963653417d2e231586b3568cb23b}{Ring\+Buf\+Ctr}} \mbox{\hyperlink{hpsdr__ring__buf_8h_a820fd7691c7d4e1a8315d6c7a5d1d41d}{Ring\+Buf\+\_\+num\+\_\+free}} (\mbox{\hyperlink{structRingBuf}{Ring\+Buf}} $\ast$const me)
\item 
bool \mbox{\hyperlink{hpsdr__ring__buf_8h_a4bfbe52c17450482a8809be209d18ab5}{Ring\+Buf\+\_\+put}} (\mbox{\hyperlink{structRingBuf}{Ring\+Buf}} $\ast$const me, float \+\_\+\+Complex const el)
\item 
bool \mbox{\hyperlink{hpsdr__ring__buf_8h_ac0d8d50a807c93f234f424a79b08b9c3}{Ring\+Buf\+\_\+get}} (\mbox{\hyperlink{structRingBuf}{Ring\+Buf}} $\ast$const me, float \+\_\+\+Complex $\ast$pel)
\item 
void \mbox{\hyperlink{hpsdr__ring__buf_8h_a97b6daa633d7d667409d08dd4cda21eb}{Ring\+Buf\+\_\+process\+\_\+all}} (\mbox{\hyperlink{structRingBuf}{Ring\+Buf}} $\ast$const me, \mbox{\hyperlink{hpsdr__ring__buf_8h_a7ee7aa265b51a69faf41a3f79ac2bc8d}{Ring\+Buf\+Handler}} handler)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Lock-\/free ring buffer. 

\begin{DoxyDate}{Date}
Last updated on\+: 2022-\/06-\/09 
\end{DoxyDate}


\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{hpsdr__ring__buf_8h_acfc2963653417d2e231586b3568cb23b}\label{hpsdr__ring__buf_8h_acfc2963653417d2e231586b3568cb23b}} 
\index{hpsdr\_ring\_buf.h@{hpsdr\_ring\_buf.h}!RingBufCtr@{RingBufCtr}}
\index{RingBufCtr@{RingBufCtr}!hpsdr\_ring\_buf.h@{hpsdr\_ring\_buf.h}}
\doxysubsubsection{\texorpdfstring{RingBufCtr}{RingBufCtr}}
{\footnotesize\ttfamily typedef uint16\+\_\+t \mbox{\hyperlink{hpsdr__ring__buf_8h_acfc2963653417d2e231586b3568cb23b}{Ring\+Buf\+Ctr}}}

Ring buffer counter/index

\begin{DoxyAttention}{Attention}
The following Ring\+Buf\+Ctr type is assumed to be \char`\"{}atomic\char`\"{} in a target CPU, meaning that the CPU needs to write the whole Ring\+Buf\+Ctr in one machine instruction. An example of violating this assumption would be an 8-\/bit CPU, which writes uint16\+\_\+t (2-\/bytes) in 2 machine instructions. For such 8-\/bit CPU, the maximum size of Ring\+Buf\+Ctr would be uint8\+\_\+t (1-\/byte).
\end{DoxyAttention}
Another case of violating the \char`\"{}atomic\char`\"{} writes to Ring\+Buf\+Ctr type would be misalignment of a Ring\+Buf\+Ctr variable in memory, which could cause the compiler to generate multiple instructions to write a Ring\+Buf\+Ctr value. Therefore, it is further assumed that all Ring\+Buf\+Ctr variables in the following \mbox{\hyperlink{structRingBuf}{Ring\+Buf}} struct {\itshape are} correctly aligned for \char`\"{}atomic\char`\"{} access. In practice, most C compilers should provide such natural alignment (by inserting some padding into the struct, if necessary). \mbox{\Hypertarget{hpsdr__ring__buf_8h_a7ee7aa265b51a69faf41a3f79ac2bc8d}\label{hpsdr__ring__buf_8h_a7ee7aa265b51a69faf41a3f79ac2bc8d}} 
\index{hpsdr\_ring\_buf.h@{hpsdr\_ring\_buf.h}!RingBufHandler@{RingBufHandler}}
\index{RingBufHandler@{RingBufHandler}!hpsdr\_ring\_buf.h@{hpsdr\_ring\_buf.h}}
\doxysubsubsection{\texorpdfstring{RingBufHandler}{RingBufHandler}}
{\footnotesize\ttfamily typedef void($\ast$ Ring\+Buf\+Handler) (float \+\_\+\+Complex const el)}

Ring buffer callback function for \mbox{\hyperlink{hpsdr__ring__buf_8h_a97b6daa633d7d667409d08dd4cda21eb}{Ring\+Buf\+\_\+process\+\_\+all()}}

The callback processes one element and runs in the context of \mbox{\hyperlink{hpsdr__ring__buf_8h_a97b6daa633d7d667409d08dd4cda21eb}{Ring\+Buf\+\_\+process\+\_\+all()}}. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{hpsdr__ring__buf_8h_a4f4486e73ca28b674b28ef3a76010747}\label{hpsdr__ring__buf_8h_a4f4486e73ca28b674b28ef3a76010747}} 
\index{hpsdr\_ring\_buf.h@{hpsdr\_ring\_buf.h}!RingBuf\_ctor@{RingBuf\_ctor}}
\index{RingBuf\_ctor@{RingBuf\_ctor}!hpsdr\_ring\_buf.h@{hpsdr\_ring\_buf.h}}
\doxysubsubsection{\texorpdfstring{RingBuf\_ctor()}{RingBuf\_ctor()}}
{\footnotesize\ttfamily void Ring\+Buf\+\_\+ctor (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structRingBuf}{Ring\+Buf}} $\ast$const}]{me,  }\item[{float \+\_\+\+Complex}]{sto\mbox{[}$\,$\mbox{]},  }\item[{\mbox{\hyperlink{hpsdr__ring__buf_8h_acfc2963653417d2e231586b3568cb23b}{Ring\+Buf\+Ctr}}}]{sto\+\_\+len }\end{DoxyParamCaption})}

\mbox{\Hypertarget{hpsdr__ring__buf_8h_ac0d8d50a807c93f234f424a79b08b9c3}\label{hpsdr__ring__buf_8h_ac0d8d50a807c93f234f424a79b08b9c3}} 
\index{hpsdr\_ring\_buf.h@{hpsdr\_ring\_buf.h}!RingBuf\_get@{RingBuf\_get}}
\index{RingBuf\_get@{RingBuf\_get}!hpsdr\_ring\_buf.h@{hpsdr\_ring\_buf.h}}
\doxysubsubsection{\texorpdfstring{RingBuf\_get()}{RingBuf\_get()}}
{\footnotesize\ttfamily bool Ring\+Buf\+\_\+get (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structRingBuf}{Ring\+Buf}} $\ast$const}]{me,  }\item[{float \+\_\+\+Complex $\ast$}]{pel }\end{DoxyParamCaption})}

\mbox{\Hypertarget{hpsdr__ring__buf_8h_a820fd7691c7d4e1a8315d6c7a5d1d41d}\label{hpsdr__ring__buf_8h_a820fd7691c7d4e1a8315d6c7a5d1d41d}} 
\index{hpsdr\_ring\_buf.h@{hpsdr\_ring\_buf.h}!RingBuf\_num\_free@{RingBuf\_num\_free}}
\index{RingBuf\_num\_free@{RingBuf\_num\_free}!hpsdr\_ring\_buf.h@{hpsdr\_ring\_buf.h}}
\doxysubsubsection{\texorpdfstring{RingBuf\_num\_free()}{RingBuf\_num\_free()}}
{\footnotesize\ttfamily \mbox{\hyperlink{hpsdr__ring__buf_8h_acfc2963653417d2e231586b3568cb23b}{Ring\+Buf\+Ctr}} Ring\+Buf\+\_\+num\+\_\+free (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structRingBuf}{Ring\+Buf}} $\ast$const}]{me }\end{DoxyParamCaption})}

\mbox{\Hypertarget{hpsdr__ring__buf_8h_a97b6daa633d7d667409d08dd4cda21eb}\label{hpsdr__ring__buf_8h_a97b6daa633d7d667409d08dd4cda21eb}} 
\index{hpsdr\_ring\_buf.h@{hpsdr\_ring\_buf.h}!RingBuf\_process\_all@{RingBuf\_process\_all}}
\index{RingBuf\_process\_all@{RingBuf\_process\_all}!hpsdr\_ring\_buf.h@{hpsdr\_ring\_buf.h}}
\doxysubsubsection{\texorpdfstring{RingBuf\_process\_all()}{RingBuf\_process\_all()}}
{\footnotesize\ttfamily void Ring\+Buf\+\_\+process\+\_\+all (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structRingBuf}{Ring\+Buf}} $\ast$const}]{me,  }\item[{\mbox{\hyperlink{hpsdr__ring__buf_8h_a7ee7aa265b51a69faf41a3f79ac2bc8d}{Ring\+Buf\+Handler}}}]{handler }\end{DoxyParamCaption})}

\mbox{\Hypertarget{hpsdr__ring__buf_8h_a4bfbe52c17450482a8809be209d18ab5}\label{hpsdr__ring__buf_8h_a4bfbe52c17450482a8809be209d18ab5}} 
\index{hpsdr\_ring\_buf.h@{hpsdr\_ring\_buf.h}!RingBuf\_put@{RingBuf\_put}}
\index{RingBuf\_put@{RingBuf\_put}!hpsdr\_ring\_buf.h@{hpsdr\_ring\_buf.h}}
\doxysubsubsection{\texorpdfstring{RingBuf\_put()}{RingBuf\_put()}}
{\footnotesize\ttfamily bool Ring\+Buf\+\_\+put (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structRingBuf}{Ring\+Buf}} $\ast$const}]{me,  }\item[{float \+\_\+\+Complex const}]{el }\end{DoxyParamCaption})}

